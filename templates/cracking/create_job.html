{% extends "../main.html" %}

{% block title %}Create Job{% end %}

{% block content %}
  <h2>Targeting System</h2>
  <br />
  {% if errors != None and len(errors) != 0 %}
    {% for error in errors %}
      <div class="alert alert-error">
        <a class="close" data-dismiss="alert" href="#">Ã—</a>
        <h4 class="alert-heading">ERROR</h4>
        {{ error }}
      </div>
    {% end %}
  {% end %}
  <script>
    function setAlgo(new_algo) {
        document.getElementById('algorithm').value = new_algo;
    }
    function setFormat(fmt) {
        document.getElementById('format').value = fmt;
    }
  </script>
  <div class="well">
    <form action="/cracking/createjob" method="post">  
      {% raw xsrf_form_html() %}
      <fieldset>
      <legend>Create a New Job</legend>
        <p>
          <label for="jobname">Job Name</label>
          <input placeholder="Job Name" type="text" name="jobname" id="jobname" />
        </p>
        <p>
          <label for="algorithm">Hash Algorithm</label>
          <input type="hidden" id="algorithm" name="algorithm" value="" />
          <div class="btn-group" data-toggle="buttons-radio">
              {% from models import Algorithm %}
              {% for algo in Algorithm.all() %}
                <button class="btn btn-primary" type="button" onclick="setAlgo('{{ algo.uuid }}')">{{ algo.algorithm_name }}</button>
              {% end %}
          </div>
        </p>
        <p>
          <label for="format">Hash Format</label>
          <input type="hidden" id="format" name="format" value="" />
          <div class="btn-group" data-toggle="buttons-radio">
                <button class="btn btn-primary" type="button" onclick="setFormat('newline')">Line Seperated</button>
                <button class="btn btn-primary" type="button" onclick="setFormat('pwdump')">PW Dump</button>
                <button class="btn btn-primary" type="button" onclick="setFormat('lst')">Cain &amp; Able</button>
          </div>
        </p>
        <p>
          <label for="hashes">Password Hashes</label>
          <textarea name="hashes" placeholder="Copy &amp; Paste Hashes" style="width:auto" rows="15" cols="45">
          </textarea>
        </p>
      </fieldset>
      <p class="submit">
        <button class="btn btn-primary btn-large" type="submit"> Create Job </button>
      </p>   
    </form>
    <script>
      document.getElementById('jobname').focus();
    </script>
  </div>
{% end %}
